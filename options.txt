// netservice-01w-Pi1541 options.txt (Pi Zero W only)
//
// This file is read by both kernels:
// - legacy emulator kernel (cycle-exact, no networking)
// - Circle service kernel ("MINI SERVICE", networking only while active)



// --- HW ----------------------------------------------------------------------

// Split IEC lines (Option B hardware).
// Keep 0 by default (Option A baseline); set 1 only if your wiring uses split lines.
splitIECLines = 0

// OLED (SSD1306 over I2C).
LCDName = ssd1306_128x64

// I2C bus selection:
// - splitIECLines=1: OLED typically on I2C-1 (pins 3/5) -> i2cBusMaster=1
// - splitIECLines=0: OLED typically on I2C-0 (pins 27/28) -> i2cBusMaster=0
i2cBusMaster = 0
i2cLcdAddress = 60	// decimal, shifted (60 == 0x78)
i2cLcdOnContrast = 127
i2cScan = 0
i2cLcdUseCBMChar = 1

// Head step sound (optional).
// For the Pi Zero W (01W) netservice variant:
// SoundOnGPIO = 1  -> GPIO buzzer (supported)
// SoundOnGPIO = 0  -> DMA sound (not supported in this Pi Zero W (01W) netservice variant; avoid)
// SoundOnGPIO = -1 -> disable
SoundOnGPIO = 1
SoundOnGPIODuration = 1000 // microseconds
SoundOnGPIOFreq = 150      // Hz

// Rotary encoder (KY-040)
//
// Not supported in the Pi Zero W (01W) netservice variant.
// You can still enable it for experiments, but it may reduce emulation stability.
//
//RotaryEncoderEnable = 1
//RotaryEncoderInvert = 0



// --- Emulation ---------------------------------------------------------------

// ROMs
ROM1 = dos1541
ROM2 = dos1541ii
ROM1581 = dos1581

ChargenFont = chargen

// Determinism knobs (Pi Zero W):
QuickBoot = 1          // mostly redundant now; keeps legacy boot delays bypassed
DisableHDMI = 1
HeadLess = 1
DisplayTemperature = 0
DisplayPNGIcons = 0
displayTracks = 0
HDMIGraphIEC = 0
HDMIDisplayIECActivity = 0

// FB64 (CBMFileBrowser) helpers
OnResetChangeToStartingFolder = 1
// If you would ever like to disable browse mode completely you can do so here
// DisableSD2IECCommands = 1
// AutoMountImage is currently unsupported in this Pi Zero W (01W)
// netservice variant (ACTIVE.LST boot path wins by design).
// AutoMountImage = fb.d64  // must exist in SD:/1541/
LowercaseBrowseModeFilenames = 1



// --- Split Workflow Policy (boot + mounted exit) -----------------------------

// NoActive: what to do at boot if SD:/1541/_active_mount/ACTIVE.LST is missing/empty.
//   service = enter MINI SERVICE
//   browser = enter Pi-side file browser/menu
NoActive = service

// MountTap/MountHold: what ENTER/EJECT does while mounted (emulating).
//   browser = leave emulation and return to file browser/menu
//   service = leave emulation and enter MINI SERVICE (long-press only)
//   stay    = ignore
MountTap = browser
MountHold = service

// ResetExit: what repeated reset does while mounted.
//   stay    = ignore reset-exit (recommended)
//   browser = exit to file browser/menu
ResetExit = stay

// HoldMs: unified long-press threshold used for ENTER-hold (service) and DOWN-hold (next disk).
HoldMs = 850



// --- Service Kernel (Circle) -------------------------------------------------

// WiFi join (wpa_supplicant) + DHCP while in MINI SERVICE only.
// - Credentials: SD:/wpa_supplicant.conf
// - WLAN firmware: SD:/firmware/
netWifi = 1
// Reserved/not implemented in the Pi Zero W (01W) netservice variant (service networking is WLAN-only).
// Keep at 0.
netEthernet = 0

// NOTE: service kernel currently supports WiFi only (no Ethernet).
// NOTE: service kernel supports static IPv4 when DHCP is disabled (useDHCP=0).
useDHCP = 1

// Static IPv4 (only used when useDHCP=0).
// NOTE: Option key is "IPAdress" (compat spelling).
IPAdress = 192.168.1.31
NetMask = 255.255.255.0
DefaultGateway = 192.168.1.1
DNSServer = 192.168.1.1

// Modified disk export retention:
// 0 = keep only the current session (no history), N > 0 = keep last N sessions
// in SD:/1541/_temp_dirty_disks/
TempSavedSessions = 5

// TZ (hours from UTC) for service logs/time display if used.
TZ = 0.0
